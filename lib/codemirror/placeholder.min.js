!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(i){function l(e){e.state.placeholder&&(e.state.placeholder.parentNode.removeChild(e.state.placeholder),e.state.placeholder=null)}function a(e){l(e);var o=e.state.placeholder=document.createElement("pre");o.style.cssText="height: 0; overflow: visible",o.style.direction=e.getOption("direction"),o.className="CodeMirror-placeholder CodeMirror-line-like";var t=e.getOption("placeholder");"string"==typeof t&&(t=document.createTextNode(t)),o.appendChild(t),e.display.lineSpace.insertBefore(o,e.display.lineSpace.firstChild)}function c(e){r(e)&&a(e)}function p(e){var o=e.getWrapperElement(),t=r(e);o.className=o.className.replace(" CodeMirror-empty","")+(t?" CodeMirror-empty":""),(t?a:l)(e)}function r(e){return 1===e.lineCount()&&""===e.getLine(0)}i.defineOption("placeholder","",function(e,o,t){var r,n=t&&t!=i.Init;o&&!n?(e.on("blur",c),e.on("change",p),e.on("swapDoc",p),i.on(e.getInputField(),"compositionupdate",e.state.placeholderCompose=function(){var t;t=e,setTimeout(function(){var e=!1,o=t.getInputField();"TEXTAREA"==o.nodeName?e=!o.value:1==t.lineCount()&&(e=!/[^\u200b]/.test(o.querySelector(".CodeMirror-line").textContent)),(e?a:l)(t)},20)}),p(e)):!o&&n&&(e.off("blur",c),e.off("change",p),e.off("swapDoc",p),i.off(e.getInputField(),"compositionupdate",e.state.placeholderCompose),l(e),(r=e.getWrapperElement()).className=r.className.replace(" CodeMirror-empty","")),o&&!e.hasFocus()&&c(e)})});